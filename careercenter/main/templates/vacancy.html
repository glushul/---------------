{% extends "layout.html" %}
{% load static %}

{% block content %}
<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-lg-9">
      <article class="bg-white rounded-3 shadow-sm border p-4 p-md-5">
                <header class="mb-5">
          <div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-start gap-3">
            <div>
              <div class="d-flex justify-content-between align-items-start mb-2">
                <h1 class="h2 fw-bold me-3">{{ v.title }}</h1>
                <a href="{{v.id}}/edit" class="btn btn-sm btn-outline-secondary">
                  <i class="bi bi-pencil"></i> –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                </a>
              </div>
              <div class="d-flex align-items-center gap-3 mt-2">
                <img src="
                {% if v.company.logo %} 
                {{ v.company.logo.url }} 
                {% else %} 
                /media/logos/not_found.png 
                {% endif %} " 
                alt="{{ v.company.name }} logo"
                  class="rounded" style="height: 48px; width: auto; object-fit: contain;">
                <div>
                  <div class="h5 mb-0 fw-semibold">{{ v.company.name }}</div>
                  {% if v.company.industry %}
                    <div class="text-muted small">{{ v.company.industry }}</div>
                  {% endif %}
                </div>
              </div>
            </div>

            {% if v.employment_type %}
              <span class="badge {% if v.employment_type == 'full' %}bg-success
                            {% elif v.employment_type == 'internship' %}bg-info
                            {% elif v.employment_type == 'part' %}bg-warning
                            {% else %}bg-secondary{% endif %}">
                {% if v.employment_type == 'full' %}–ü–æ–ª–Ω–∞—è
                  {% elif v.employment_type == 'internship' %}–°—Ç–∞–∂–∏—Ä–æ–≤–∫–∞
                  {% elif v.employment_type == 'part' %}–ß–∞—Å—Ç–∏—á–Ω–∞—è
                  {% else %}–ü—Ä–æ–µ–∫—Ç{% endif %}
              </span>
            {% endif %}
          </div>
        </header>
      

        <div class="d-flex flex-wrap gap-3 mb-5 p-3 bg-light bg-opacity-25 rounded-2">
          {% if v.salary_min or v.salary_max %}
            <div>
              <div class="text-muted small">–ó–∞—Ä–ø–ª–∞—Ç–∞</div>
              <div class="fw-medium">
                {% if v.salary_min and v.salary_max %}
                  –æ—Ç {{ v.salary_min }} –¥–æ {{ v.salary_max }} ‚ÇΩ
                {% elif v.salary_min %}
                  –æ—Ç {{ v.salary_min }} ‚ÇΩ
                {% elif v.salary_max %}
                  –¥–æ {{ v.salary_max }} ‚ÇΩ
                {% else %}
                  –Ω–µ —É–∫–∞–∑–∞–Ω–∞
                {% endif %}
              </div>
            </div>
          {% endif %}

          {% if v.schedule %}
            <div>
              <div class="text-muted small">–ì—Ä–∞—Ñ–∏–∫</div>
              <div class="fw-medium">üïò 
                  {% if v.schedule == 'remote' %}–£–¥–∞–ª—ë–Ω–∫–∞
                  {% elif v.schedule == 'office' %}–û—Ñ–∏—Å
                  {% elif v.schedule == 'hybrid' %}–ì–∏–±—Ä–∏–¥
                  {% elif v.schedule == 'flexible' %}–ì–∏–±–∫–∏–π –≥—Ä–∞—Ñ–∏–∫
                  {% else %}–ü–æ –¥–æ–≥–æ–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç–∏{% endif %}</div>
            </div>
          {% endif %}
          
          {% if v.city or v.address %}
            <div>
              <div class="text-muted small">–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ</div>
              <div class="fw-medium">
                {% if v.city %}{{ v.city }}{% endif %}
                {% if v.address %}<br><small>üìç {{ v.address }}</small>{% endif %}
              </div>
            </div>
          {% endif %}
        </div>

        {% if v.description %}
          <section class="mb-5">
            <h2 class="h5 fw-bold mb-3 pb-2 border-bottom">–û–ø–∏—Å–∞–Ω–∏–µ –≤–∞–∫–∞–Ω—Å–∏–∏</h2>
            <div class="text-body">{{ v.description|linebreaksbr }}</div>
          </section>
        {% endif %}

        {% if v.requirements %}
          <section class="mb-5">
            <h2 class="h5 fw-bold mb-3 pb-2 border-bottom">–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è</h2>
            <div class="text-body">{{ v.requirements|safe }}</div>
          </section>
        {% endif %}

        {% if v.responsibilities %}
          <section class="mb-5">
            <h2 class="h5 fw-bold mb-3 pb-2 border-bottom">–û–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏</h2>
            <div class="text-body">{{ v.responsibilities|safe }}</div>
          </section>
        {% endif %}

        {% if v.conditions %}
          <section class="mb-5">
            <h2 class="h5 fw-bold mb-3 pb-2 border-bottom">–£—Å–ª–æ–≤–∏—è</h2>
            <div class="text-body">{{ v.conditions|safe }}</div>
          </section>
        {% endif %}

        {% if v.company.description %}
          <section class="mb-5">
            <h2 class="h5 fw-bold mb-3 pb-2 border-bottom">–û –∫–æ–º–ø–∞–Ω–∏–∏</h2>
            <div class="text-body">{{ v.company.description|linebreaksbr }}</div>
          </section>
        {% endif %}

        {% if v.created_at %}
          <footer class="text-muted small mt-4 pt-3 border-top">
            –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ: {{ v.created_at|date:"d.m.Y –≤ H:i" }}
            {% if not v.is_active %}
              <span class="badge bg-warning text-dark ms-2">–ù–µ–∞–∫—Ç–∏–≤–Ω–∞</span>
            {% endif %}
          </footer>
        {% endif %}
      </article>

      <div class="text-center mt-4">
        <a href="/vacancies" class="btn btn-outline-primary px-4">‚Üê –ö —Å–ø–∏—Å–∫—É –≤–∞–∫–∞–Ω—Å–∏–π</a>
      </div>
    </div>
  </div>
</div>
{% endblock %}